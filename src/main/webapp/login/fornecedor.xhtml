<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core"
>
  <ui:composition template="./index.xhtml">
    <ui:define name="content">
      <h:form id="crud-fornecedor">
        <p:growl id="msgCrudFornecedor" showDetail="true" showSummary="true">
          <p:tabView activeIndex="#{fornecedorC.aba}">
            <p:tab title="Pesquisar">
              <p:panel
                id="listagem-fornecedor"
                header="Pesquisar Fornecedor"
                style="margin-bottom: 20px"
              >
                <h:panelGrid columns="3" cellpadding="10">
                  <p:outputLabel for="pesquisarNomeFornecedor" value="Nome:" />
                  <p:inputText
                    id="pesquisarNomeFornecedor"
                    value="#{fornecedorC.fornecedorVO.nome}"
                    required="true"
                    requiredMessage="Nome é Obrigatório!"
                  />
                  <p:commandButton
                    value="Pesquisar"
                    icon="pi pi-refresh"
                    actionListener="#{fornecedorC.pesquisar()}"
                    update="tabelaFornecedor"
                    process="@this pesquisarNomeFornecedor"
                  />
                </h:panelGrid>
                <p:dataTable
                  id="tabelaFornecedor"
                  var="fornecedor"
                  value="#{fornecedorC.dataModel}"
                  paginator="true"
                  emptyMessage="Nenhum Fornecedor Encontrado!"
                  rows="10"
                  reflow="true"
                  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                  currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                  rowsPerPageTemplate="5,10,15"
                >
                  <p:column headerText="Cliente">
                    <h:outputText value="#{fornecedor.id}" />
                  </p:column>
                  <p:column headerText="E-Mail">
                    <h:outputText value="#{fornecedor.email}" />
                  </p:column>
                  <p:column headerText="Telefone">
                    <h:outputText value="#{fornecedor.telefone}" />
                  </p:column>
                  <p:column headerText="Data de Cadastro">
                    <h:outputText value="#{fornecedor.dtCadastro}">
                      <f:convertDateTime pattern="dd/MM/yyyy - HH:mm:ss - a" />
                    </h:outputText>
                  </p:column>
                  <p:column headerText="Ação" style="text-align: center">
                    <p:commandButton
                      value="Excluir"
                      actionListener="#{fornecedorC.excluir()}"
                      style="background-color: #d0383b"
                      update="crud-fornecedor"
                      icon="pi pi-trash"
                      process="@this"
                    >
                      <p:confirm
                        header="Confirmar"
                        message="Deseja realmente excluir?"
                        icon="pi pi-exclamation-triangle"
                      />
                    </p:commandButton>
                    <p:commandButton
                      value="Editar"
                      actionListener="#{fornecedorC.editar()}"
                      update="@form"
                      icon="pi pi-pencil"
                      process="@this"
                    />
                  </p:column>

                  <f:facet name="paginatorTopLeft">
                    <p:commandButton type="button" icon="pi pi-refresh" />
                  </f:facet>

                  <f:facet name="paginatorBottomRight">
                    <p:commandButton type="button" icon="pi pi-cloud-upload" />
                  </f:facet>
                </p:dataTable>

                <p:confirmDialog
                  global="true"
                  showEffect="fade"
                  hideEffect="fade"
                >
                  <p:commandButton
                    value="Sim"
                    type="button"
                    styleClass="ui-confirmdialog-yes"
                    icon="pi pi-check"
                  />
                  <p:commandButton
                    value="Não"
                    type="button"
                    styleClass="ui-confirmdialog-no"
                    icon="pi pi-times"
                  />
                </p:confirmDialog>
              </p:panel>
            </p:tab>
            <p:tab title="Novo">
              <p:panel
                id="cadastro"
                header="Cadastrar/Alterar Fornecedor"
                style="margin-bottom: 20px"
              >
                <h:panelGrid id="gridCadastro" columns="2" cellpadding="10">
                  <p:outputLabel value="Nome:" for="nome" />
                  <p:inputText
                    id="nome"
                    required="true"
                    requiredMessage="Nome é Obrigatório!"
                    value="#{fornecedorC.fornecedorVO.nome}"
                  />

                  <p:outputLabel value="E-Mail:" for="email" />
                  <p:inputText
                    id="email"
                    required="true"
                    requiredMessage="E-Mail é Obrigatório!"
                    value="#{fornecedorC.fornecedorVO.email}"
                  />

                  <p:outputLabel value="Telefone:" for="telefone" />
                  <p:inputMask
                    id="telefone"
                    required="true"
                    mask="(99) 9 9999-9999"
                    requiredMessage="Telefone é Obrigatório!"
                    value="#{fornecedorC.fornecedorVO.telefone}"
                  />

                  <p:outputLabel value="Descricao:" for="descricao" />
                  <p:inputTextarea
                    id="descricao"
                    autoResize="false"
                    style="resize: vertical; max-height: 350px"
                    cols="50"
                    rows="10"
                    queryDelay="750"
                    minQueryLength="4"
                    value="#{fornecedorC.fornecedorVO.descricao}"
                  />
                  <!-- -->
                  <h:panelGroup>
                    <p:commandButton
                      value="Cadastrar"
                      icon="pi pi-plus"
                      actionListener="#{fornecedorC.salvar()}"
                      update="@form"
                      process="@this gridCadastro"
                    />
                    <p:commandButton
                      value="Limpar"
                      icon="pi pi-refresh"
                      actionListener="#{fornecedorC.limpar()}"
                      update="@form"
                      process="@this"
                    />
                  </h:panelGroup>
                </h:panelGrid>
              </p:panel>
            </p:tab>
          </p:tabView>
        </p:growl>
      </h:form>
    </ui:define>
  </ui:composition>
</html>
